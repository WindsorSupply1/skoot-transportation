"use strict";(()=>{var e={};e.id=1958,e.ids=[1958],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},37706:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>h,patchFetch:()=>v,requestAsyncStorage:()=>g,routeModule:()=>l,serverHooks:()=>m,staticGenerationAsyncStorage:()=>d});var i={};t.r(i),t.d(i,{GET:()=>c,dynamic:()=>u});var a=t(49303),n=t(88716),s=t(60670),o=t(87070),p=t(20728);let u="force-dynamic";async function c(e){try{let{searchParams:r}=new URL(e.url),t=r.get("customerType"),i=parseInt(r.get("passengerCount")||"1"),a=parseInt(r.get("extraLuggage")||"0"),n=parseInt(r.get("pets")||"0"),s="true"===r.get("roundTrip"),u=await p._.pricingTier.findMany({where:{isActive:!0}}),c=await p._.siteSettings.findUnique({where:{key:"extraLuggageFee"}}),l=await p._.siteSettings.findUnique({where:{key:"petFee"}}),g=c?parseFloat(c.value):5,d=l?parseFloat(l.value):10,m=35;if(t&&u.length>0){let e=u.find(e=>e.customerType===t&&e.isActive);m=e?e.basePrice:35}else{let e={LEGACY:31,STUDENT:32,MILITARY:32,REGULAR:35};m=e[t]||e.REGULAR}let h=m*i,v=a*g,x=n*d,f=h+v+x,y=f,T=0;if(s){let e=2*f;T=Math.round(.1*e),y=e-T}let P={basePrice:m,passengerCount:i,passengerCost:h,extraLuggage:a,luggageCost:v,pets:n,petCost:x,subtotal:f,isRoundTrip:s,savings:T,total:y,customerType:t},R=u.map(e=>({name:e.name,basePrice:e.basePrice,description:e.description,customerType:e.customerType}));return o.NextResponse.json({breakdown:P,availableTiers:R,fees:{extraLuggage:g,pets:d}})}catch(e){return console.error("Pricing calculation error:",e),o.NextResponse.json({error:"Internal server error"},{status:500})}}let l=new a.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/pricing/route",pathname:"/api/pricing",filename:"route",bundlePath:"app/api/pricing/route"},resolvedPagePath:"C:\\Users\\priej\\skoot-transportation\\src\\app\\api\\pricing\\route.ts",nextConfigOutput:"",userland:i}),{requestAsyncStorage:g,staticGenerationAsyncStorage:d,serverHooks:m}=l,h="/api/pricing/route";function v(){return(0,s.patchFetch)({serverHooks:m,staticGenerationAsyncStorage:d})}},20728:(e,r,t)=>{t.d(r,{_:()=>a});let i=require("@prisma/client"),a=globalThis.prisma??new i.PrismaClient}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),i=r.X(0,[8948,5972],()=>t(37706));module.exports=i})();