"use strict";(()=>{var e={};e.id=4657,e.ids=[4657],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},46709:(e,t,o)=>{o.r(t),o.d(t,{originalPathname:()=>m,patchFetch:()=>h,requestAsyncStorage:()=>d,routeModule:()=>u,serverHooks:()=>g,staticGenerationAsyncStorage:()=>f});var r={};o.r(r),o.d(r,{GET:()=>c,dynamic:()=>l});var i=o(49303),a=o(88716),s=o(60670),n=o(87070),p=o(20728);let l="force-dynamic";async function c(e){try{let{searchParams:t}=new URL(e.url),o=t.get("type"),r={..."true"===t.get("includeInactive")?{}:{isActive:!0}};"pickup"===o?r.isPickup=!0:"dropoff"===o||"destination"===o?r.isDropoff=!0:"all"===o?r.OR=[{isPickup:!0},{isDropoff:!0}]:r.isPickup=!0;let i=await p._.location.findMany({where:r,select:{id:!0,name:!0,address:!0,city:!0,state:!0,zipCode:!0,latitude:!0,longitude:!0,isPickup:!0,isDropoff:!0,instructions:!0,operatingHours:!0,maxCapacity:!0,sortOrder:!0},orderBy:[{sortOrder:"asc"},{name:"asc"}]}),a=new Date,s=a.toLocaleDateString("en-US",{weekday:"long"}).toLowerCase(),l=a.toTimeString().slice(0,5),c=i.map(e=>{let t=!0;if(e.operatingHours&&"object"==typeof e.operatingHours){let o=e.operatingHours[s];if(o&&!o.enabled)t=!1;else if(o&&o.enabled){let e=o.open||"00:00",r=o.close||"23:59";(l<e||l>r)&&(t=!1)}}return{...e,fullAddress:`${e.address}, ${e.city}, ${e.state} ${e.zipCode}`,isCurrentlyAvailable:t,types:[...e.isPickup?["pickup"]:[],...e.isDropoff?["dropoff"]:[]]}});return n.NextResponse.json({locations:c,meta:{total:c.length,available:c.filter(e=>e.isCurrentlyAvailable).length,pickupCount:c.filter(e=>e.isPickup).length,dropoffCount:c.filter(e=>e.isDropoff).length}})}catch(e){return console.error("Error fetching locations:",e),n.NextResponse.json({error:"Failed to fetch locations"},{status:500})}}let u=new i.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/locations/route",pathname:"/api/locations",filename:"route",bundlePath:"app/api/locations/route"},resolvedPagePath:"C:\\Users\\priej\\skoot-transportation\\src\\app\\api\\locations\\route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:d,staticGenerationAsyncStorage:f,serverHooks:g}=u,m="/api/locations/route";function h(){return(0,s.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:f})}},20728:(e,t,o)=>{o.d(t,{_:()=>i});let r=require("@prisma/client"),i=globalThis.prisma??new r.PrismaClient}};var t=require("../../../webpack-runtime.js");t.C(e);var o=e=>t(t.s=e),r=t.X(0,[8948,5972],()=>o(46709));module.exports=r})();