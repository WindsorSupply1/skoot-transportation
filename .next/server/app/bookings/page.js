(()=>{var e={};e.id=5926,e.ids=[5926],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},50586:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>o,routeModule:()=>h,tree:()=>d}),t(61523),t(22636),t(35866);var a=t(23191),r=t(88716),n=t(37922),i=t.n(n),l=t(95231),c={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>l[e]);t.d(s,c);let d=["",{children:["bookings",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,61523)),"C:\\Users\\priej\\skoot-transportation\\src\\app\\bookings\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,22636)),"C:\\Users\\priej\\skoot-transportation\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,35866,23)),"next/dist/client/components/not-found-error"]}],o=["C:\\Users\\priej\\skoot-transportation\\src\\app\\bookings\\page.tsx"],x="/bookings/page",m={require:t,loadChunk:()=>Promise.resolve()},h=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/bookings/page",pathname:"/bookings",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},35073:(e,s,t)=>{Promise.resolve().then(t.bind(t,86756))},83855:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(76557).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},86756:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>f,dynamic:()=>y});var a=t(10326),r=t(17577),n=t(35659),i=t(90434),l=t(54659),c=t(48998),d=t(94019),o=t(87888),x=t(86333),m=t(42887),h=t(28916),g=t(83855),u=t(37358),p=t(24061),j=t(77636);let N=(0,t(76557).Z)("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);var b=t(31540);let y="force-dynamic";function f(){let{isAuthenticated:e,user:s,isLoading:t}=(0,n.a)(),[y,f]=(0,r.useState)([]),[v,w]=(0,r.useState)(!0),[k,C]=(0,r.useState)(null),[P,E]=(0,r.useState)("all"),[D,Z]=(0,r.useState)(null),S=async()=>{try{w(!0),C(null);let e=await fetch("/api/bookings?user=true");if(e.ok){let s=await e.json();f(s.bookings||[])}else throw Error("Failed to fetch bookings")}catch(e){C("Unable to load your bookings. Please try again.")}finally{w(!1)}},A=e=>new Date(e).toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric"}),L=e=>{let[s,t]=e.split(":"),a=parseInt(s);return`${0===a?12:a>12?a-12:a}:${t} ${a>=12?"PM":"AM"}`},T=e=>{switch(e){case"CONFIRMED":return"bg-green-100 text-green-800";case"PENDING":return"bg-yellow-100 text-yellow-800";case"CANCELLED":return"bg-red-100 text-red-800";case"COMPLETED":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}},O=e=>{switch(e){case"CONFIRMED":case"COMPLETED":return a.jsx(l.Z,{className:"w-4 h-4"});case"PENDING":return a.jsx(c.Z,{className:"w-4 h-4"});case"CANCELLED":return a.jsx(d.Z,{className:"w-4 h-4"});default:return a.jsx(o.Z,{className:"w-4 h-4"})}},M=async e=>{if(confirm("Are you sure you want to cancel this booking? This action cannot be undone."))try{if((await fetch(`/api/bookings/${e}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"CANCELLED"})})).ok)await S(),Z(null);else throw Error("Failed to cancel booking")}catch(e){alert("Failed to cancel booking. Please contact support.")}};if(t)return a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-orange-600"})});if(!e)return(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[a.jsx("div",{className:"bg-white shadow-sm border-b",children:a.jsx("div",{className:"max-w-6xl mx-auto px-4 py-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)(i.default,{href:"/",className:"flex items-center text-gray-600 hover:text-orange-600 transition-colors font-medium",children:[a.jsx(x.Z,{className:"w-5 h-5 mr-2"}),"Home"]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-8 h-8 bg-orange-600 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-white font-bold text-sm",children:"S"})}),a.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"SKOOT"})]}),(0,a.jsxs)("a",{href:"tel:+1-803-SKOOT-SC",className:"flex items-center text-gray-600 hover:text-orange-600 transition-colors",children:[a.jsx(m.Z,{className:"w-4 h-4 mr-1"}),a.jsx("span",{className:"hidden sm:inline text-sm",children:"Support"})]})]})})}),(0,a.jsxs)("div",{className:"max-w-2xl mx-auto px-4 py-16 text-center",children:[a.jsx("div",{className:"w-16 h-16 bg-orange-100 rounded-full flex items-center justify-center mx-auto mb-6",children:a.jsx(h.Z,{className:"w-8 h-8 text-orange-600"})}),a.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Sign In to View Your Bookings"}),a.jsx("p",{className:"text-gray-600 mb-8",children:"Access your booking history, manage upcoming trips, and download receipts."}),(0,a.jsxs)("div",{className:"space-y-4",children:[a.jsx(i.default,{href:"/auth/signin",className:"inline-block bg-orange-600 text-white px-8 py-3 rounded-lg font-medium hover:bg-orange-700 transition-colors",children:"Sign In to Your Account"}),(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:["Don't have an account?"," ",a.jsx(i.default,{href:"/auth/signup",className:"text-orange-600 hover:text-orange-700",children:"Create one here"})]})]})]})]});let _=(e=>{let s=new Date;switch(P){case"upcoming":return e.filter(e=>new Date(e.departure.date)>=s&&"CANCELLED"!==e.status);case"past":return e.filter(e=>new Date(e.departure.date)<s||"COMPLETED"===e.status);case"cancelled":return e.filter(e=>"CANCELLED"===e.status);default:return e}})(y);return(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[a.jsx("div",{className:"bg-white shadow-sm border-b",children:a.jsx("div",{className:"max-w-6xl mx-auto px-4 py-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)(i.default,{href:"/",className:"flex items-center text-gray-600 hover:text-orange-600 transition-colors font-medium",children:[a.jsx(x.Z,{className:"w-5 h-5 mr-2"}),"Home"]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-8 h-8 bg-orange-600 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-white font-bold text-sm",children:"S"})}),a.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"SKOOT"})]}),(0,a.jsxs)("a",{href:"tel:+1-803-SKOOT-SC",className:"flex items-center text-gray-600 hover:text-orange-600 transition-colors",children:[a.jsx(m.Z,{className:"w-4 h-4 mr-1"}),a.jsx("span",{className:"hidden sm:inline text-sm",children:"Support"})]})]})})}),(0,a.jsxs)("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"My Bookings"}),a.jsx("p",{className:"text-gray-600",children:"Manage your SKOOT shuttle reservations"})]}),(0,a.jsxs)(i.default,{href:"/booking",className:"flex items-center space-x-2 bg-orange-600 text-white px-4 py-2 rounded-lg hover:bg-orange-700 transition-colors",children:[a.jsx(g.Z,{className:"w-4 h-4"}),a.jsx("span",{children:"New Booking"})]})]}),a.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-10 h-10 bg-orange-100 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-orange-600 font-semibold",children:s?.name?.charAt(0)||"U"})}),(0,a.jsxs)("div",{children:[a.jsx("div",{className:"font-medium text-gray-900",children:s?.name}),a.jsx("div",{className:"text-sm text-gray-500",children:s?.email})]})]})})]}),a.jsx("div",{className:"flex space-x-1 mb-6",children:[{key:"all",label:"All Bookings"},{key:"upcoming",label:"Upcoming"},{key:"past",label:"Past"},{key:"cancelled",label:"Cancelled"}].map(e=>a.jsx("button",{onClick:()=>E(e.key),className:`px-4 py-2 rounded-lg font-medium transition-colors ${P===e.key?"bg-orange-600 text-white":"bg-white text-gray-600 hover:bg-gray-50 border border-gray-200"}`,children:e.label},e.key))}),v&&(0,a.jsxs)("div",{className:"text-center py-12",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-orange-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading your bookings..."})]}),k&&(0,a.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 text-center",children:[a.jsx(o.Z,{className:"w-8 h-8 text-red-500 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold text-red-800 mb-2",children:"Error Loading Bookings"}),a.jsx("p",{className:"text-red-600 mb-4",children:k}),a.jsx("button",{onClick:S,className:"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors",children:"Try Again"})]}),!v&&!k&&0===_.length&&(0,a.jsxs)("div",{className:"text-center py-12",children:[a.jsx(h.Z,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"all"===P?"No bookings yet":`No ${P} bookings`}),a.jsx("p",{className:"text-gray-600 mb-6",children:"all"===P?"You haven't made any bookings yet. Ready for your first trip?":`You don't have any ${P} bookings.`}),(0,a.jsxs)(i.default,{href:"/booking",className:"inline-flex items-center space-x-2 bg-orange-600 text-white px-6 py-3 rounded-lg hover:bg-orange-700 transition-colors",children:[a.jsx(g.Z,{className:"w-4 h-4"}),a.jsx("span",{children:"Book Your First Trip"})]})]}),!v&&!k&&_.length>0&&a.jsx("div",{className:"space-y-4",children:_.map(e=>a.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-6 hover:shadow-md transition-shadow",children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 mb-3",children:[(0,a.jsxs)("span",{className:`inline-flex items-center space-x-1 px-2 py-1 rounded-full text-xs font-medium ${T(e.status)}`,children:[O(e.status),a.jsx("span",{children:e.status})]}),(0,a.jsxs)("span",{className:"text-sm text-gray-500",children:["Booking #",e.id.slice(-6)]})]}),(0,a.jsxs)("div",{className:"grid md:grid-cols-3 gap-4 mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx(u.Z,{className:"w-4 h-4 text-gray-400"}),(0,a.jsxs)("div",{children:[a.jsx("div",{className:"text-sm text-gray-500",children:"Date"}),a.jsx("div",{className:"font-medium",children:A(e.departure.date)})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx(c.Z,{className:"w-4 h-4 text-gray-400"}),(0,a.jsxs)("div",{children:[a.jsx("div",{className:"text-sm text-gray-500",children:"Departure"}),a.jsx("div",{className:"font-medium",children:L(e.departure.schedule.time)})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx(p.Z,{className:"w-4 h-4 text-gray-400"}),(0,a.jsxs)("div",{children:[a.jsx("div",{className:"text-sm text-gray-500",children:"Passengers"}),a.jsx("div",{className:"font-medium",children:e.passengers})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx(j.Z,{className:"w-4 h-4 text-green-600"}),a.jsx("span",{className:"text-sm text-gray-600",children:e.pickupLocation.name})]}),a.jsx("span",{className:"text-gray-400",children:"→"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx(j.Z,{className:"w-4 h-4 text-blue-600"}),a.jsx("span",{className:"text-sm text-gray-600",children:"CLT Airport"})]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("div",{className:"text-lg font-bold text-gray-900",children:["$",(e.totalAmount/100).toFixed(2)]}),a.jsx("div",{className:"text-sm text-gray-500",children:"Total"})]})]})]}),a.jsx("div",{className:"ml-4",children:a.jsx("div",{className:"flex space-x-2",children:a.jsx("button",{onClick:()=>Z(e),className:"p-2 text-gray-400 hover:text-gray-600 transition-colors",children:a.jsx(N,{className:"w-4 h-4"})})})})]})},e.id))})]}),D&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsx("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Booking Details"}),a.jsx("button",{onClick:()=>Z(null),className:"p-2 text-gray-400 hover:text-gray-600 transition-colors",children:a.jsx(d.Z,{className:"w-5 h-5"})})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("span",{className:`inline-flex items-center space-x-1 px-3 py-1 rounded-full text-sm font-medium ${T(D.status)}`,children:[O(D.status),a.jsx("span",{children:D.status})]}),(0,a.jsxs)("span",{className:"text-sm text-gray-500",children:["Booking #",D.id]})]}),(0,a.jsxs)("div",{className:"border-t pt-6",children:[a.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Trip Information"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("div",{className:"text-sm text-gray-500",children:"Date"}),a.jsx("div",{className:"font-medium",children:A(D.departure.date)})]}),(0,a.jsxs)("div",{children:[a.jsx("div",{className:"text-sm text-gray-500",children:"Departure Time"}),a.jsx("div",{className:"font-medium",children:L(D.departure.schedule.time)})]}),(0,a.jsxs)("div",{children:[a.jsx("div",{className:"text-sm text-gray-500",children:"Passengers"}),a.jsx("div",{className:"font-medium",children:D.passengers})]}),(0,a.jsxs)("div",{children:[a.jsx("div",{className:"text-sm text-gray-500",children:"Total Amount"}),(0,a.jsxs)("div",{className:"font-medium",children:["$",(D.totalAmount/100).toFixed(2)]})]})]})]}),(0,a.jsxs)("div",{className:"border-t pt-6",children:[a.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Locations"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[a.jsx(j.Z,{className:"w-5 h-5 text-green-600 mt-0.5"}),(0,a.jsxs)("div",{children:[a.jsx("div",{className:"font-medium",children:D.pickupLocation.name}),a.jsx("div",{className:"text-sm text-gray-500",children:D.pickupLocation.address})]})]}),(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[a.jsx(j.Z,{className:"w-5 h-5 text-blue-600 mt-0.5"}),(0,a.jsxs)("div",{children:[a.jsx("div",{className:"font-medium",children:"Charlotte Douglas Airport"}),a.jsx("div",{className:"text-sm text-gray-500",children:"All terminals"})]})]})]})]}),(0,a.jsxs)("div",{className:"border-t pt-6",children:[a.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Customer Information"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx("span",{className:"text-sm text-gray-500 w-16",children:"Name:"}),(0,a.jsxs)("span",{className:"font-medium",children:[D.customer.firstName," ",D.customer.lastName]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx("span",{className:"text-sm text-gray-500 w-16",children:"Email:"}),a.jsx("span",{className:"font-medium",children:D.customer.email})]}),D.customer.phone&&(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx("span",{className:"text-sm text-gray-500 w-16",children:"Phone:"}),a.jsx("span",{className:"font-medium",children:D.customer.phone})]})]})]}),a.jsx("div",{className:"border-t pt-6",children:(0,a.jsxs)("div",{className:"flex space-x-3",children:[(0,a.jsxs)("button",{onClick:()=>window.print(),className:"flex items-center space-x-2 bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 transition-colors",children:[a.jsx(b.Z,{className:"w-4 h-4"}),a.jsx("span",{children:"Download Receipt"})]}),(e=>{let s=new Date(e.departure.date),t=new Date;return(s.getTime()-t.getTime())/36e5>2&&"CONFIRMED"===e.status})(D)&&(0,a.jsxs)("button",{onClick:()=>M(D.id),className:"flex items-center space-x-2 bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors",children:[a.jsx(d.Z,{className:"w-4 h-4"}),a.jsx("span",{children:"Cancel Booking"})]}),(0,a.jsxs)(i.default,{href:"/contact",className:"flex items-center space-x-2 bg-orange-600 text-white px-4 py-2 rounded-lg hover:bg-orange-700 transition-colors",children:[a.jsx(m.Z,{className:"w-4 h-4"}),a.jsx("span",{children:"Contact Support"})]})]})})]})]})})})]})}},61523:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>n,dynamic:()=>r});var a=t(68570);let r=(0,a.createProxy)(String.raw`C:\Users\priej\skoot-transportation\src\app\bookings\page.tsx#dynamic`),n=(0,a.createProxy)(String.raw`C:\Users\priej\skoot-transportation\src\app\bookings\page.tsx#default`)}};var s=require("../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[8948,7114,434,3160],()=>t(50586));module.exports=a})();