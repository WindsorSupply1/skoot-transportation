(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3],{117:function(e,s,t){Promise.resolve().then(t.bind(t,973))},9763:function(e,s,t){"use strict";t.d(s,{Z:function(){return r}});var a=t(2265),l={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),r=(e,s)=>{let t=(0,a.forwardRef)((t,r)=>{let{color:n="currentColor",size:d=24,strokeWidth:c=2,absoluteStrokeWidth:o,className:m="",children:x,...h}=t;return(0,a.createElement)("svg",{ref:r,...l,width:d,height:d,stroke:n,strokeWidth:o?24*Number(c)/Number(d):c,className:["lucide","lucide-".concat(i(e)),m].join(" "),...h},[...s.map(e=>{let[s,t]=e;return(0,a.createElement)(s,t)}),...Array.isArray(x)?x:[x]])});return t.displayName="".concat(e),t}},2252:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9763).Z)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},1047:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9763).Z)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]])},5302:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9763).Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},1723:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9763).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},5252:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9763).Z)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},3774:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9763).Z)("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},525:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9763).Z)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])},5805:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9763).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},9376:function(e,s,t){"use strict";var a=t(5475);t.o(a,"useRouter")&&t.d(s,{useRouter:function(){return a.useRouter}})},973:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return N}});var a=t(7437),l=t(2265),i=t(605),r=t(9376),n=t(2252),d=t(9763);let c=(0,d.Z)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);var o=t(1047),m=t(5252),x=t(5805),h=t(1723),u=t(525),g=t(3774),y=t(5302);let p=(0,d.Z)("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);function N(){var e,s;let{data:t,status:d}=(0,i.useSession)(),N=(0,r.useRouter)(),[j,f]=(0,l.useState)(null),[b,v]=(0,l.useState)([]),[w,k]=(0,l.useState)([]),[Z,C]=(0,l.useState)(!0),[S,D]=(0,l.useState)(null);(0,l.useEffect)(()=>{if("loading"!==d){if(!(null==t?void 0:t.user)){N.push("/auth/signin");return}E()}},[t,d,N]);let E=async()=>{C(!0),D(null);try{let[e,s,t]=await Promise.all([fetch("/api/admin/dashboard/stats",{credentials:"include"}),fetch("/api/admin/bookings?limit=10",{credentials:"include"}),fetch("/api/admin/departures/today",{credentials:"include"})]);if(!e.ok){let s=await e.text();throw Error("Stats API failed: ".concat(e.status," - ").concat(s))}let a=await e.json();if(f(a.stats),s.ok){let e=await s.json();v(e.bookings||[])}if(t.ok){let e=await t.json();k(e.departures||[])}}catch(e){console.error("Failed to fetch dashboard data:",e),D(e instanceof Error?e.message:"Failed to load dashboard data")}finally{C(!1)}},L=e=>{switch(e.toLowerCase()){case"confirmed":case"paid":return"text-green-600 bg-green-50";case"pending":return"text-yellow-600 bg-yellow-50";case"cancelled":case"failed":return"text-red-600 bg-red-50";default:return"text-gray-600 bg-gray-50"}},M=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e),R=e=>new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}),P=e=>{let[s,t]=e.split(":").map(Number),a=new Date;return a.setHours(s,t),a.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})};return Z?(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-600"})}):S?(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-8 max-w-md",children:[(0,a.jsxs)("div",{className:"text-red-600 mb-4",children:[(0,a.jsx)(n.Z,{className:"h-8 w-8 mx-auto mb-2"}),(0,a.jsx)("h2",{className:"text-lg font-semibold text-center",children:"Dashboard Error"})]}),(0,a.jsx)("p",{className:"text-gray-600 text-center mb-4",children:S}),(0,a.jsx)("button",{onClick:()=>E(),className:"w-full bg-orange-600 text-white py-2 px-4 rounded-lg hover:bg-orange-700",children:"Retry"})]})}):(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)("div",{className:"bg-white shadow-sm border-b",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"flex items-center justify-between h-16",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-orange-600",children:"SKOOT"}),(0,a.jsx)("div",{className:"ml-4 text-gray-500",children:"Admin Dashboard"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("span",{className:"text-gray-700",children:["Welcome, ",(null==t?void 0:null===(e=t.user)||void 0===e?void 0:e.name)||(null==t?void 0:null===(s=t.user)||void 0===s?void 0:s.email)]}),(0,a.jsxs)("button",{onClick:()=>N.push("/auth/signin"),className:"flex items-center text-gray-500 hover:text-gray-700",children:[(0,a.jsx)(c,{className:"h-4 w-4 mr-1"}),"Sign Out"]})]})]})})}),(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[j&&(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-6 gap-6 mb-8",children:[(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(o.Z,{className:"h-8 w-8 text-blue-600"}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Today's Bookings"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:j.todayBookings})]})]})}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(m.Z,{className:"h-8 w-8 text-green-600"}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Today's Revenue"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:M(j.todayRevenue)})]})]})}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(x.Z,{className:"h-8 w-8 text-purple-600"}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Total Customers"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:j.totalCustomers})]})]})}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(h.Z,{className:"h-8 w-8 text-orange-600"}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Upcoming Departures"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:j.upcomingDepartures})]})]})}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(u.Z,{className:"h-8 w-8 text-indigo-600"}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Occupancy Rate"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:[j.occupancyRate,"%"]})]})]})}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(n.Z,{className:"h-8 w-8 text-red-600"}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Pending Payments"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:j.pendingPayments})]})]})})]}),(0,a.jsxs)("div",{className:"grid lg:grid-cols-2 gap-8",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm",children:[(0,a.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Today's Departures"})}),(0,a.jsx)("div",{className:"divide-y divide-gray-200 max-h-96 overflow-y-auto",children:w.length>0?w.map(e=>(0,a.jsx)("div",{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"text-lg font-bold text-gray-900",children:P(e.schedule.time)}),(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:[(0,a.jsx)(g.Z,{className:"inline h-4 w-4 mr-1"}),e.schedule.route.origin," → ",e.schedule.route.destination]})]}),(0,a.jsx)("div",{className:"mt-2 text-sm text-gray-500",children:e.schedule.route.name})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("div",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ".concat(0===e.availableSeats?"bg-red-100 text-red-800":e.availableSeats<5?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"),children:[e.bookedSeats,"/",e.capacity," booked"]}),(0,a.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:[e.availableSeats," seats left"]})]})]})},e.id)):(0,a.jsx)("div",{className:"p-8 text-center text-gray-500",children:"No departures scheduled for today"})})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm",children:[(0,a.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Recent Bookings"})}),(0,a.jsx)("div",{className:"divide-y divide-gray-200 max-h-96 overflow-y-auto",children:b.length>0?b.map(e=>{var s;return(0,a.jsx)("div",{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"font-medium text-gray-900",children:e.bookingNumber}),(0,a.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ".concat(L(e.status)),children:e.status})]}),(0,a.jsxs)("div",{className:"mt-1 text-sm text-gray-600",children:[(null===(s=e.user)||void 0===s?void 0:s.email)||(e.guestFirstName&&e.guestLastName?"".concat(e.guestFirstName," ").concat(e.guestLastName):e.guestEmail||"Guest")," • ",e.passengerCount," passenger",e.passengerCount>1?"s":""]}),(0,a.jsxs)("div",{className:"mt-1 text-sm text-gray-500",children:[e.departure.schedule.route.name," • ",R(e.departure.date)," at ",P(e.departure.schedule.time)]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("div",{className:"font-bold text-gray-900",children:M(e.totalAmount)}),(0,a.jsxs)("div",{className:"text-xs ".concat(L(e.status)),children:["PAID"===e.status&&(0,a.jsx)(y.Z,{className:"inline h-3 w-3 mr-1"}),"CANCELLED"===e.status&&(0,a.jsx)(p,{className:"inline h-3 w-3 mr-1"}),"PENDING"===e.status&&(0,a.jsx)(h.Z,{className:"inline h-3 w-3 mr-1"}),e.status]})]})]})},e.id)}):(0,a.jsx)("div",{className:"p-8 text-center text-gray-500",children:"No recent bookings"})})]})]}),(0,a.jsxs)("div",{className:"mt-8 grid sm:grid-cols-2 lg:grid-cols-7 gap-6",children:[(0,a.jsxs)("button",{onClick:()=>N.push("/admin/bookings"),className:"bg-white rounded-lg shadow-sm p-6 text-left hover:shadow-md transition-shadow",children:[(0,a.jsx)(o.Z,{className:"h-8 w-8 text-blue-600 mb-3"}),(0,a.jsx)("h3",{className:"font-semibold text-gray-900",children:"Manage Bookings"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"View and edit customer bookings"})]}),(0,a.jsxs)("button",{onClick:()=>N.push("/admin/pickup-locations"),className:"bg-white rounded-lg shadow-sm p-6 text-left hover:shadow-md transition-shadow",children:[(0,a.jsx)(g.Z,{className:"h-8 w-8 text-indigo-600 mb-3"}),(0,a.jsx)("h3",{className:"font-semibold text-gray-900",children:"Pickup Locations"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Manage pickup and dropoff points"})]}),(0,a.jsxs)("button",{onClick:()=>N.push("/admin/schedules"),className:"bg-white rounded-lg shadow-sm p-6 text-left hover:shadow-md transition-shadow",children:[(0,a.jsx)(h.Z,{className:"h-8 w-8 text-orange-600 mb-3"}),(0,a.jsx)("h3",{className:"font-semibold text-gray-900",children:"Schedules"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Manage departure schedules"})]}),(0,a.jsxs)("button",{onClick:()=>N.push("/admin/customers"),className:"bg-white rounded-lg shadow-sm p-6 text-left hover:shadow-md transition-shadow",children:[(0,a.jsx)(x.Z,{className:"h-8 w-8 text-purple-600 mb-3"}),(0,a.jsx)("h3",{className:"font-semibold text-gray-900",children:"Customers"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Customer database and history"})]}),(0,a.jsxs)("button",{onClick:()=>N.push("/admin/reports"),className:"bg-white rounded-lg shadow-sm p-6 text-left hover:shadow-md transition-shadow",children:[(0,a.jsx)(u.Z,{className:"h-8 w-8 text-green-600 mb-3"}),(0,a.jsx)("h3",{className:"font-semibold text-gray-900",children:"Reports"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Revenue and analytics"})]}),(0,a.jsxs)("button",{onClick:()=>N.push("/admin/pricing"),className:"bg-white rounded-lg shadow-sm p-6 text-left hover:shadow-md transition-shadow",children:[(0,a.jsx)(m.Z,{className:"h-8 w-8 text-yellow-600 mb-3"}),(0,a.jsx)("h3",{className:"font-semibold text-gray-900",children:"Pricing"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Manage ticket prices and fees"})]}),(0,a.jsxs)("button",{onClick:()=>N.push("/admin/vehicles"),className:"bg-white rounded-lg shadow-sm p-6 text-left hover:shadow-md transition-shadow",children:[(0,a.jsx)("div",{className:"text-2xl mb-3",children:"\uD83D\uDE90"}),(0,a.jsx)("h3",{className:"font-semibold text-gray-900",children:"Vehicles"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Manage fleet and van pricing"})]})]})]})]})}}},function(e){e.O(0,[605,971,117,744],function(){return e(e.s=117)}),_N_E=e.O()}]);