(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[153],{2644:function(e,t,s){Promise.resolve().then(s.bind(s,4686))},4686:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return i}});var a=s(7437),l=s(2265);function i(){let[e,t]=(0,l.useState)([]),[s,i]=(0,l.useState)(!0),[r,n]=(0,l.useState)(!1),[d,o]=(0,l.useState)(""),[x,u]=(0,l.useState)(""),[m,h]=(0,l.useState)(null),[p,y]=(0,l.useState)(!1);(0,l.useEffect)(()=>{b()},[]);let b=async()=>{try{let e=await fetch("/api/admin/vehicles",{credentials:"include"});if(!e.ok)throw Error("Failed to fetch vehicles");let s=await e.json();t(s.vehicles||[])}catch(e){o("Failed to load vehicles"),console.error(e)}finally{i(!1)}},g=async e=>{n(!0),o("");try{let t=m?"/api/admin/vehicles/".concat(m.id):"/api/admin/vehicles",s=m?"PUT":"POST",a=await fetch(t,{method:s,headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(e)});if(!a.ok){let e=await a.json();throw Error(e.error||"Failed to save vehicle")}await b(),h(null),y(!1),u("Vehicle ".concat(m?"updated":"created"," successfully!")),setTimeout(()=>u(""),3e3)}catch(e){o(e.message),console.error(e)}finally{n(!1)}},v=async e=>{if(confirm("Are you sure you want to delete this vehicle?")){n(!0),o("");try{let t=await fetch("/api/admin/vehicles/".concat(e),{method:"DELETE",credentials:"include"});if(!t.ok){let e=await t.json();throw Error(e.error||"Failed to delete vehicle")}await b(),u("Vehicle deleted successfully!"),setTimeout(()=>u(""),3e3)}catch(e){o(e.message),console.error(e)}finally{n(!1)}}},f=e=>{if(1===e)return"Standard";let t=Math.round((e-1)*100);return t>0?"+".concat(t,"% Premium"):"".concat(t,"% Discount")},j=e=>e>=1.3?"text-purple-600":e>1?"text-blue-600":1===e?"text-gray-600":"text-green-600";return s?(0,a.jsx)("div",{className:"p-6",children:(0,a.jsxs)("div",{className:"animate-pulse",children:[(0,a.jsx)("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-6"}),(0,a.jsx)("div",{className:"space-y-4",children:[1,2,3].map(e=>(0,a.jsx)("div",{className:"h-20 bg-gray-200 rounded"},e))})]})}):(0,a.jsxs)("div",{className:"p-6 max-w-6xl mx-auto",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"\uD83D\uDE90 Vehicle Management"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Manage your fleet and set vehicle-specific pricing"})]}),d&&(0,a.jsx)("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:(0,a.jsx)("p",{className:"text-red-700",children:d})}),x&&(0,a.jsx)("div",{className:"mb-6 p-4 bg-green-50 border border-green-200 rounded-lg",children:(0,a.jsx)("p",{className:"text-green-700",children:x})}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,a.jsxs)("div",{className:"p-6 border-b border-gray-200 flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Your Fleet"}),(0,a.jsx)("p",{className:"text-gray-600 mt-1",children:"Assign vehicles to departures and set custom pricing"})]}),(0,a.jsx)("button",{onClick:()=>y(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"+ Add Vehicle"})]}),(0,a.jsxs)("div",{className:"overflow-x-auto",children:[(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Vehicle Name"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Capacity"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Price Modifier"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(e=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("span",{className:"text-sm text-gray-500",children:[e.capacity," seats"]})}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,a.jsx)("span",{className:"text-sm font-medium ".concat(j(e.priceMultiplier)),children:f(e.priceMultiplier)}),(0,a.jsxs)("div",{className:"text-xs text-gray-400",children:["\xd7",e.priceMultiplier]})]}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat(e.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.isActive?"Active":"Inactive"})}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm space-x-2",children:[(0,a.jsx)("button",{onClick:()=>h(e),className:"text-blue-600 hover:text-blue-900",children:"Edit"}),(0,a.jsx)("button",{onClick:()=>v(e.id),className:"text-red-600 hover:text-red-900",disabled:r,children:"Delete"})]})]},e.id))})]}),0===e.length&&(0,a.jsx)("div",{className:"text-center py-12",children:(0,a.jsxs)("div",{className:"text-gray-500",children:[(0,a.jsx)("p",{className:"text-lg",children:"No vehicles found"}),(0,a.jsx)("p",{className:"text-sm",children:"Add your first vehicle to get started"})]})})]})]}),(m||p)&&(0,a.jsx)(c,{vehicle:m,onSave:g,onCancel:()=>{h(null),y(!1)},saving:r})]})}function c(e){let{vehicle:t,onSave:s,onCancel:i,saving:c}=e,[r,n]=(0,l.useState)({name:(null==t?void 0:t.name)||"",capacity:(null==t?void 0:t.capacity)||15,priceMultiplier:(null==t?void 0:t.priceMultiplier)||1,isActive:(null==t?void 0:t.isActive)!==!1});return(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full",children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:t?"Edit Vehicle":"Add New Vehicle"}),(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),s(r)},className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Vehicle Name"}),(0,a.jsx)("input",{type:"text",value:r.name,onChange:e=>n(t=>({...t,name:e.target.value})),placeholder:"e.g., Van A, Premium Coach",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Seat Capacity"}),(0,a.jsx)("input",{type:"number",min:"1",max:"50",value:r.capacity,onChange:e=>n(t=>({...t,capacity:parseInt(e.target.value)||15})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Price Modifier"}),(0,a.jsx)("select",{value:r.priceMultiplier,onChange:e=>n(t=>({...t,priceMultiplier:parseFloat(e.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[{value:.9,label:"Economy (-10%)",color:"text-green-600"},{value:1,label:"Standard",color:"text-gray-600"},{value:1.2,label:"Premium (+20%)",color:"text-blue-600"},{value:1.3,label:"Ultra Premium (+30%)",color:"text-purple-600"}].map(e=>(0,a.jsx)("option",{value:e.value,children:e.label},e.value))}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"This will multiply the base ticket price"})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"checkbox",id:"isActive",checked:r.isActive,onChange:e=>n(t=>({...t,isActive:e.target.checked})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,a.jsx)("label",{htmlFor:"isActive",className:"ml-2 block text-sm text-gray-700",children:"Active"})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,a.jsx)("button",{type:"button",onClick:i,className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:"Cancel"}),(0,a.jsx)("button",{type:"submit",disabled:c,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",children:c?"Saving...":"Save Vehicle"})]})]})]})})})}}},function(e){e.O(0,[971,117,744],function(){return e(e.s=2644)}),_N_E=e.O()}]);