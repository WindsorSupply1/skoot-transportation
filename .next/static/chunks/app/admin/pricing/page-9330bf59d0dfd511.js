(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[701],{6433:function(e,t,s){Promise.resolve().then(s.bind(s,432))},432:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return i}});var a=s(7437),r=s(2265);function i(){let[e,t]=(0,r.useState)([]),[s,i]=(0,r.useState)({extraLuggageFee:5,petFee:10}),[c,n]=(0,r.useState)(!0),[d,o]=(0,r.useState)(!1),[x,u]=(0,r.useState)(""),[m,p]=(0,r.useState)(""),[g,h]=(0,r.useState)(null),[b,y]=(0,r.useState)(!1);(0,r.useEffect)(()=>{f()},[]);let f=async()=>{try{let e=await fetch("/api/admin/pricing",{credentials:"include"});if(!e.ok)throw Error("Failed to fetch pricing");let s=await e.json();t(s.pricingTiers),i(s.fees)}catch(e){u("Failed to load pricing data"),console.error(e)}finally{n(!1)}},j=async e=>{o(!0),u("");try{if(!(await fetch("/api/admin/pricing",{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(e)})).ok)throw Error("Failed to update fees");i(t=>({...t,...e})),p("Fees updated successfully!"),setTimeout(()=>p(""),3e3)}catch(e){u("Failed to update fees"),console.error(e)}finally{o(!1)}},N=async e=>{o(!0),u("");try{let t=g?"/api/admin/pricing/".concat(g.id):"/api/admin/pricing",s=g?"PUT":"POST",a=await fetch(t,{method:s,headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(e)});if(!a.ok){let e=await a.json();throw Error(e.error||"Failed to save pricing tier")}await f(),h(null),y(!1),p("Pricing tier ".concat(g?"updated":"created"," successfully!")),setTimeout(()=>p(""),3e3)}catch(e){u(e.message),console.error(e)}finally{o(!1)}},v=async e=>{if(confirm("Are you sure you want to delete this pricing tier?")){o(!0),u("");try{let t=await fetch("/api/admin/pricing/".concat(e),{method:"DELETE",credentials:"include"});if(!t.ok){let e=await t.json();throw Error(e.error||"Failed to delete pricing tier")}await f(),p("Pricing tier deleted successfully!"),setTimeout(()=>p(""),3e3)}catch(e){u(e.message),console.error(e)}finally{o(!1)}}};return c?(0,a.jsx)("div",{className:"p-6",children:(0,a.jsxs)("div",{className:"animate-pulse",children:[(0,a.jsx)("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-6"}),(0,a.jsx)("div",{className:"space-y-4",children:[1,2,3].map(e=>(0,a.jsx)("div",{className:"h-20 bg-gray-200 rounded"},e))})]})}):(0,a.jsxs)("div",{className:"p-6 max-w-6xl mx-auto",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"\uD83D\uDCB0 Pricing Management"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Manage ticket prices and additional fees"})]}),x&&(0,a.jsx)("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:(0,a.jsx)("p",{className:"text-red-700",children:x})}),m&&(0,a.jsx)("div",{className:"mb-6 p-4 bg-green-50 border border-green-200 rounded-lg",children:(0,a.jsx)("p",{className:"text-green-700",children:m})}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow mb-8",children:[(0,a.jsxs)("div",{className:"p-6 border-b border-gray-200",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Additional Fees"}),(0,a.jsx)("p",{className:"text-gray-600 mt-1",children:"Set fees for extra luggage and pets"})]}),(0,a.jsxs)("div",{className:"p-6 grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Extra Luggage Fee (per bag)"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("span",{className:"text-gray-500",children:"$"}),(0,a.jsx)("input",{type:"number",step:"0.01",value:s.extraLuggageFee,onChange:e=>i(t=>({...t,extraLuggageFee:parseFloat(e.target.value)||0})),className:"block w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,a.jsx)("button",{onClick:()=>j({extraLuggageFee:s.extraLuggageFee}),disabled:d,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",children:"Save"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Pet Fee (per pet)"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("span",{className:"text-gray-500",children:"$"}),(0,a.jsx)("input",{type:"number",step:"0.01",value:s.petFee,onChange:e=>i(t=>({...t,petFee:parseFloat(e.target.value)||0})),className:"block w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,a.jsx)("button",{onClick:()=>j({petFee:s.petFee}),disabled:d,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",children:"Save"})]})]})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,a.jsxs)("div",{className:"p-6 border-b border-gray-200 flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Ticket Prices by Customer Type"}),(0,a.jsx)("p",{className:"text-gray-600 mt-1",children:"Base ticket prices for different customer categories"})]}),(0,a.jsx)("button",{onClick:()=>y(!0),className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700",children:"+ Add New Price"})]}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer Type"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Base Price"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(e=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsx)("span",{className:"text-sm font-medium text-gray-900",children:e.customerType})})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("span",{className:"text-lg font-semibold text-green-600",children:["$",e.basePrice]})}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsx)("span",{className:"text-sm text-gray-500",children:e.description||"No description"})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat(e.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.isActive?"Active":"Inactive"})}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium space-x-2",children:[(0,a.jsx)("button",{onClick:()=>h(e),className:"text-blue-600 hover:text-blue-900",children:"Edit"}),(0,a.jsx)("button",{onClick:()=>v(e.id),className:"text-red-600 hover:text-red-900",disabled:d,children:"Delete"})]})]},e.id))})]})})]}),(g||b)&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full",children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:g?"Edit Pricing Tier":"Create New Pricing Tier"}),(0,a.jsx)(l,{tier:g,customerTypes:["REGULAR","STUDENT","MILITARY","LEGACY"],onSave:N,onCancel:()=>{h(null),y(!1)},saving:d})]})})})]})}function l(e){let{tier:t,customerTypes:s,onSave:i,onCancel:l,saving:c}=e,[n,d]=(0,r.useState)({name:(null==t?void 0:t.name)||"",description:(null==t?void 0:t.description)||"",basePrice:(null==t?void 0:t.basePrice)||35,customerType:(null==t?void 0:t.customerType)||"REGULAR",isActive:(null==t?void 0:t.isActive)!==!1});return(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),i(n)},className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),(0,a.jsx)("input",{type:"text",value:n.name,onChange:e=>d(t=>({...t,name:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Customer Type"}),(0,a.jsx)("select",{value:n.customerType,onChange:e=>d(t=>({...t,customerType:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:s.map(e=>(0,a.jsx)("option",{value:e,children:e},e))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Base Price ($)"}),(0,a.jsx)("input",{type:"number",step:"0.01",value:n.basePrice,onChange:e=>d(t=>({...t,basePrice:parseFloat(e.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,a.jsx)("textarea",{value:n.description,onChange:e=>d(t=>({...t,description:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"checkbox",id:"isActive",checked:n.isActive,onChange:e=>d(t=>({...t,isActive:e.target.checked})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,a.jsx)("label",{htmlFor:"isActive",className:"ml-2 block text-sm text-gray-700",children:"Active"})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,a.jsx)("button",{type:"button",onClick:l,className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:"Cancel"}),(0,a.jsx)("button",{type:"submit",disabled:c,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",children:c?"Saving...":"Save"})]})]})}}},function(e){e.O(0,[971,117,744],function(){return e(e.s=6433)}),_N_E=e.O()}]);