(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[95],{6829:function(e,t,n){Promise.resolve().then(n.bind(n,3149))},9376:function(e,t,n){"use strict";var s=n(5475);n.o(s,"useRouter")&&n.d(t,{useRouter:function(){return s.useRouter}})},3149:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return c}});var s=n(7437),a=n(2265),i=n(605),r=n(9376);function c(){var e;let{data:t}=(0,i.useSession)(),n=(0,r.useRouter)(),[c,d]=(0,a.useState)(!1),[o,l]=(0,a.useState)(""),[u,m]=(0,a.useState)(!1),h=async()=>{d(!0),l("");try{let e=await fetch("/api/setup-admin",{method:"POST",headers:{"Content-Type":"application/json"}}),t=await e.json();e.ok?(m(!0),l("Success! ".concat(t.message)),setTimeout(()=>{n.push("/admin")},2e3)):l("Error: ".concat(t.error))}catch(e){l("Failed to setup admin account")}finally{d(!1)}};return t?(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,s.jsxs)("div",{className:"bg-white p-8 rounded-lg shadow-md max-w-md w-full",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold mb-6 text-center",children:"Setup Admin Account"}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("p",{className:"text-gray-600",children:"Signed in as:"}),(0,s.jsx)("p",{className:"font-medium",children:null===(e=t.user)||void 0===e?void 0:e.email})]}),o&&(0,s.jsx)("div",{className:"mb-4 p-3 rounded ".concat(u?"bg-green-100 text-green-700":"bg-red-100 text-red-700"),children:o}),(0,s.jsx)("button",{onClick:h,disabled:c||u,className:"w-full py-2 px-4 rounded font-medium ".concat(c||u?"bg-gray-300 cursor-not-allowed":"bg-orange-600 hover:bg-orange-700 text-white"),children:c?"Setting Up...":u?"Setup Complete!":"Make Me Admin"}),u&&(0,s.jsx)("p",{className:"text-sm text-gray-600 mt-3 text-center",children:"Redirecting to admin dashboard..."})]})}):(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,s.jsxs)("div",{className:"bg-white p-8 rounded-lg shadow-md",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Please Sign In First"}),(0,s.jsx)("p",{children:"You need to be signed in to set up admin access."}),(0,s.jsx)("a",{href:"/auth/signin",className:"text-blue-600 hover:underline",children:"Go to Sign In"})]})})}}},function(e){e.O(0,[605,971,117,744],function(){return e(e.s=6829)}),_N_E=e.O()}]);